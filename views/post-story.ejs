<!doctype html>
<html lang="en">
<head>
<!--    <meta charset="utf-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>STORY</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/javascripts/database.js" type="module"></script>
    <script src="/javascripts/story.js"></script>
    <script src="https://www.dukelearntoprogram.com/course1/common/js/image/SimpleImage.js">
    </script>
</head>
<body onload="init()" >
    <div class="container">
        <h1 class="fst-italic pt-3 fw-bold"><span class="badge text-bg-dark"><%= title %></span></h1>
        <p class="font-monospace pt-3">Please fill the form with all the details to upload a story.</p>
        <form id="xForm">
            <div class="form-group row mb-3">
                <label for="fname">Author name:</label>
                <div  class="col-md-10">
                    <input type="text" id="aName" name="aName" class="form-control" required>
                </div>
            </div>
            <div class="form-group row mb-3">
                <label for="title">Story Title:</label>
                <div  class="col-md-10">
                    <input type="text" id="postTitle" name="postTitle" class="form-control" required>
                </div>
            </div>
            <div class="form-group row mb-3">
                <label for="image">Choose a Image to upload:</label>
                <div  class="col-md-10">
                    <input type="file" id="postImage" name="postImage" class="form-control" onchange="convertToBase64String()" required>
                </div>
            </div>
            <div class="form-group  row mb-3">
                <label for="description">Description of the story :</label>
              <div class="col-md-10">
                <textarea id="postDescription" rows="10" name="postDescription" class="form-control form-floating" placeholder="Give a brief description about the story." required></textarea>
              </div>
            </div>
            <input id="toUpload" name="toUpload"  value="toUpload" style="display: none;">
            <input type="submit" class="btn btn-outline-primary" value="Submit">
        </form>
    </div>
    <div style="display: none" id="pending-post-block" class="boxed container-fluid mt-3">
        <h2>Pending Posts</h2>
        <div id="pending-posts"></div>
    </div>
    <script type='text/javascript'>

        function convertToBase64String() {
          var filesSelected = document.getElementById("postImage").files;
          if (filesSelected.length > 0) {
            var fileToLoad = filesSelected[0];

            var fileReader = new FileReader();

            fileReader.onload = function(fileLoadedEvent) {
              var srcData = fileLoadedEvent.target.result;
              document.getElementById("toUpload").value = srcData;
            }
            fileReader.readAsDataURL(fileToLoad);
          }

        }
      </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</body>
</html>